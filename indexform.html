<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulario Bootstrap</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
<div class="container mt-5">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h1>Formulario de Bootstrap</h1>

      <form class="row g-3 needs-validation" novalidate>
        <!-- First Name -->
        <div class="col-md-4">
          <label for="validationCustom01" class="form-label">First name</label>
          <input type="text" class="form-control" id="validationCustom01" value="Mark" required />
          <div class="valid-feedback" id="validationFirstNameValidFeedback">Looks good!</div>
          <div class="invalid-feedback" id="validationFirstNameInvalidFeedback">Please provide a valid first name.</div>
        </div>

        <!-- Last Name -->
        <div class="col-md-4">
          <label for="validationCustom02" class="form-label">Last name</label>
          <input type="text" class="form-control" id="validationCustom02" value="Otto" required />
          <div class="valid-feedback" id="validationLastNameValidFeedback">Looks good!</div>
          <div class="invalid-feedback" id="validationLastNameInvalidFeedback">Please provide a valid last name (min 3 chars).</div>
        </div>

        <!-- Username -->
        <div class="col-md-4">
          <label for="validationCustomUsername" class="form-label">Username</label>
          <div class="input-group has-validation">
            <span class="input-group-text" id="inputGroupPrepend">@</span>
            <input type="text" class="form-control" id="validationCustomUsername" aria-describedby="inputGroupPrepend" required />
            <div class="invalid-feedback" id="validationUsernameInvalidFeedback">Please choose a valid username (min 3 chars, no spaces).</div>
          </div>
        </div>

        <!-- City -->
        <div class="col-md-6">
          <label for="validationCustom03" class="form-label">City</label>
          <input type="text" class="form-control" id="validationCustom03" required />
          <div class="invalid-feedback" id="validationCityInvalidFeedback">Please provide a valid city (only letters, min 2 chars).</div>
        </div>

        <!-- State -->
        <div class="col-md-3">
          <label for="validationCustom04" class="form-label">State</label>
          <select class="form-select" id="validationCustom04" required>
            <option selected disabled value="">Choose...</option>
            <option>NY</option>
            <option>CA</option>
            <option>TX</option>
          </select>
          <div class="invalid-feedback" id="validationStateInvalidFeedback">Please select a valid state.</div>
        </div>

        <!-- Zip -->
        <div class="col-md-3">
          <label for="validationCustom05" class="form-label">Zip</label>
          <input type="text" class="form-control" id="validationCustom05" required />
          <div class="invalid-feedback" id="validationZipInvalidFeedback">Please provide a valid zip (5 digits).</div>
        </div>

        <!-- Checkbox -->
        <div class="col-12">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required />
            <label class="form-check-label" for="invalidCheck">Agree to terms and conditions</label>
            <div class="invalid-feedback">You must agree before submitting.</div>
          </div>
        </div>

        <div class="col-12">
          <button class="btn btn-primary" type="submit">Submit form</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
$(document).ready(function () {
  // Función genérica para validar longitud
  function validateLength(input, min, max) {
    var val = $(input).val().trim();
    return val.length >= min && val.length <= max;
  }

  // Validación First Name
  $("#validationCustom01").on("input", function () {
    if (validateLength(this, 3, 100)) {
      $(this).removeClass("is-invalid").addClass("is-valid");
      $("#validationFirstNameValidFeedback").show();
      $("#validationFirstNameInvalidFeedback").hide();
    } else {
      $(this).removeClass("is-valid").addClass("is-invalid");
      $("#validationFirstNameValidFeedback").hide();
      $("#validationFirstNameInvalidFeedback").show();
    }
  });

  // Validación Last Name
  $("#validationCustom02").on("input", function () {
    if (validateLength(this, 3, 100)) {
      $(this).removeClass("is-invalid").addClass("is-valid");
      $("#validationLastNameValidFeedback").show();
      $("#validationLastNameInvalidFeedback").hide();
    } else {
      $(this).removeClass("is-valid").addClass("is-invalid");
      $("#validationLastNameValidFeedback").hide();
      $("#validationLastNameInvalidFeedback").show();
    }
  });

  // Validación Username
  $("#validationCustomUsername").on("input", function () {
    var val = $(this).val().trim();
    var isValid = val.length >= 3 && !/\s/.test(val);
    if (isValid) {
      $(this).removeClass("is-invalid").addClass("is-valid");
    } else {
      $(this).removeClass("is-valid").addClass("is-invalid");
    }
  });

  // Validación City
  $("#validationCustom03").on("input", function () {
    var val = $(this).val().trim();
    var isValid = /^[a-zA-Z\s]{2,}$/.test(val);
    if (isValid) {
      $(this).removeClass("is-invalid").addClass("is-valid");
    } else {
      $(this).removeClass("is-valid").addClass("is-invalid");
    }
  });

  // Validación State
  $("#validationCustom04").on("change", function () {
    if ($(this).val()) {
      $(this).removeClass("is-invalid").addClass("is-valid");
    } else {
      $(this).removeClass("is-valid").addClass("is-invalid");
    }
  });

  // Validación Zip
  $("#validationCustom05").on("input", function () {
    var val = $(this).val().trim();
    var isValid = /^\d{5}$/.test(val);
    if (isValid) {
      $(this).removeClass("is-invalid").addClass("is-valid");
    } else {
      $(this).removeClass("is-valid").addClass("is-invalid");
    }
  });

  // Validación formulario al enviar
  $("form").on("submit", function (event) {
    if (!this.checkValidity()) {
      event.preventDefault();
      event.stopPropagation();
    }
    $(this).addClass("was-validated");
  });
});
</script>
</body>
</html>
